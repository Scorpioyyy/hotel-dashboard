# 酒店评论分析系统（开发模板）

酒店评论分析系统 - 基于真实住客评论的可视化分析与智能问答平台。

## 功能特性

### 评论浏览

- 多维度筛选：日期范围、评分、房型、出行类型、话题类别
- 关键词搜索（支持防抖）
- 多种排序方式：时间、评分、质量分、点赞数、回复数
- 评论卡片展示：评分、日期、内容、配图、标签

### 数据看板

- 核心指标展示：评论总数、平均评分、高质量评论占比
- 评分分布柱状图
- 月度趋势折线图（评论数量与平均分）
- 话题类别分布图
- 房型分布与出行类型分布饼图
- 支持点击图中相应位置直接跳转对应筛选条件的评论

### 智能问答

- 基于真实住客评论的 AI 问答系统
- 流式响应，实时输出
- 展示参考评论来源
- 保存当次访问的对话记录
- 支持终止生成与清除对话

## 技术栈

| 类别 | 技术 |
|------|------|
| 框架 | Next.js 15 (App Router) |
| 语言 | TypeScript |
| 样式 | Tailwind CSS |
| 图表 | Recharts |
| 后端 | Insforge (PostgreSQL + AI) |
| AI 模型 | Google Gemini 3 Flash Preview |

## 快速开始

### 环境要求

- Node.js 18+
- npm 或 yarn

### 安装依赖

```bash
npm install
```

### 配置环境变量

创建 `.env` 文件：

```env
NEXT_PUBLIC_INSFORGE_BASE_URL=your_insforge_url
NEXT_PUBLIC_INSFORGE_ANON_KEY=your_anon_key
```

注：数据库结构需要与 `需求文档.md` 中的第二、四点保持一致

### 启动开发服务器

```bash
npm run dev
```

访问 [http://localhost:3000](http://localhost:3000)

## 项目结构

```
src/
├── app/                # 页面路由
│   ├── page.tsx        # 评论浏览
│   ├── dashboard/      # 数据看板
│   └── qa/             # 智能问答
├── components/
│   ├── ui/             # 通用 UI 组件
│   ├── charts/         # 图表组件
│   ├── comments/       # 评论相关组件
│   └── qa/             # 问答相关组件
├── lib/
│   ├── api.ts          # 数据接口
│   ├── qa.ts           # AI 问答服务
│   ├── insforge.ts     # SDK 初始化
│   ├── constants.ts    # 常量定义
│   └── utils.ts        # 工具函数
└── types/              # TypeScript 类型定义
```

## 数据模型

### 评论分类体系

共 14 个标准类别，分为 5 大类：

- **设施类**：房间设施、公共设施、餐饮设施
- **服务类**：前台服务、客房服务、退房/入住效率
- **位置类**：交通便利性、周边配套、景观/朝向
- **价格类**：价格合理性、性价比
- **体验类**：整体满意度、安静程度、卫生状况

### 质量评分

每条评论包含 0-10 分的质量评分，用于筛选高质量内容（≥8 分）。

## 智能问答工作流程

1. **类别提取**：基于关键词匹配，从用户问题中识别相关话题类别
2. **评论检索**：从数据库获取匹配类别的高质量评论（10 条）
3. **生成回答**：将评论作为上下文，调用 AI 模型生成回答
4. **展示来源**：在回答下方展示参考的评论原文

注：无意图识别、无上下文记忆、非传统意义上的文本检索（被过度简化）

## 可用脚本

```bash
npm run dev      # 启动开发服务器
npm run build    # 构建生产版本
npm run start    # 启动生产服务器
npm run lint     # 运行 ESLint 检查
```

## License

MIT
